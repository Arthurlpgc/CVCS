\documentclass[11pt,a4paper,sans]{moderncv} 
\moderncvstyle{$params['style']}
\moderncvcolor{$params['color']} 
\usepackage{lipsum}
\usepackage[scale=$params["scale"]]{geometry}
\firstname{$firstname}
\familyname{$surname}
\title{Curriculum Vitae}
#if $address
\address{$address}{}
#end if
#if $phone
\phone{$phone}
#end if
#if $email
\email{$email}
#end if
#if $homepage
\homepage{$homepage}{$homepage}
#else if $github
\homepage{$github}{$github}
#else if $linkedin
\homepage{$linkedin}{$linkedin}
#end if

\begin{document}


\makecvtitle
#for $section in $params['section_order']
#if $section == 'education' and $education_array
\section{Education}
#for $education in $education_array
\cventry{
    $education['start_date'].strftime("%b/%y")
#if 'end_date' not in $education
    Present
#else if $education['start_date'].strftime("%b/%y") != $education['end_date'].strftime("%b/%y")
    $education['end_date'].strftime("%b/%y")
#end if
}{$education['course']}{$education['institution']}
#if 'country' in $education and 'city' in $education and $education['city'] != '' and $education['country'] != ''
{$education['city'], $education['country']}
#else
{}
#end if
#if 'teacher' in $education
{$education['teacher']}
#else
{}
#end if
#if 'description' in $education
{$break_into_items($education['description'], header="\\begin{itemize}", bottom="\\end{itemize}", itemPrefix="\\item ")}
#else
{}
#end if
#end for
#end if
#if $section == 'work' and $work_array
\section{Work Experience}
#for $work in $work_array
\cventry{
    $work['start_date'].strftime("%b/%y")
#if 'end_date' not in $work
    Present
#else if $work['start_date'].strftime("%b/%y") != $work['end_date'].strftime("%b/%y")
    $work['end_date'].strftime("%b/%y")
#end if
}
#if 'role' in $work
{$work['role']}{$work['institution']}
#else
{$work['institution']}{}
#end if
{}
#if 'country' in $work and 'city' in $work and $work['city'] != '' and $work['country'] != ''
{$work['city'], $work['country']}
#else
{}
#end if
#if 'description' in $work
{$break_into_items($work['description'], header="\\begin{itemize}", bottom="\\end{itemize}", itemPrefix="\\item ")}
#else
{}
#end if
#end for
#end if
#if $section == "project" and $project_array
\section{Projects}
#for $project in $project_array
\cventry{$project['start_date'].strftime("%b/%Y")
#if 'end_date' not in $project
    Present
#else if $project['start_date'].strftime("%b/%Y") != $project['end_date'].strftime("%b/%Y")
    $project['end_date'].strftime("%b/%Y")
#end if
}{$project['name']}
#if 'language' in $project
{$project['language']}
#else
{}
#end if
{}{}
#if 'description' in $project
{$break_into_items($project['description'], header="\\begin{itemize}", bottom="\\end{itemize}", itemPrefix="\\item ")}
#else
{}
#end if
#end for
#end if
#if $section == "academic" and $academic_array
\section{Academic Experience}
#for $academic in $academic_array
\cventry{$academic['start_date'].strftime("%b/%Y")
#if 'end_date' not in $academic
    Present
#else if $academic['start_date'].strftime("%b/%Y") != $academic['end_date'].strftime("%b/%Y")
     $academic['end_date'].strftime("%b/%Y")
#end if
}{$academic['name']}
#if 'institution' in $academic
{$academic['institution']}
#else
{}
#end if
{}{}
#if 'description' in $academic
{$break_into_items($academic['description'], header="\\begin{itemize}", bottom="\\end{itemize}", itemPrefix="\\item ")}
#else
{}
#end if
#end for
#end if
#if $section == "achievement" and $achievement_array
\section{Achievements}
#for $achievement in $achievement_array
\cvitem{$achievement['start_date'].strftime("%d/%b/%Y")}{$achievement['name']}
#end for
#end if
#if $section == "language" and $language_array
\section{Languages}
#for $language in $language_array
\cvitem{$language['language']}{$language['level']}
#end for
#end if
#if $section == "skill" and $skill_dict.keys() != ['Languages'] and $skill_dict != {}
\section{Skills}
#for $skill in $skill_dict.keys()
#if $skill != "Languages"
\cvitem{$skill}{${', '.join($skill_dict[$skill])}}
#end if
#end for
#end if
#end for
\end{document}
